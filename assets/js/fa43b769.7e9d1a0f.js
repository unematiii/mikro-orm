(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[79499],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return m},kt:function(){return u}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=a.createContext({}),p=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(d.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},s=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,d=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),s=p(n),u=r,N=s["".concat(d,".").concat(u)]||s[u]||k[u]||i;return n?a.createElement(N,l(l({ref:t},m),{},{components:n})):a.createElement(N,l({ref:t},m))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=s;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},81053:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},metadata:function(){return o},toc:function(){return d},default:function(){return m}});var a=n(74034),r=n(79973),i=(n(67294),n(3905)),l={title:"Decorators Reference"},o={unversionedId:"decorators",id:"version-3.6/decorators",isDocsHomePage:!1,title:"Decorators Reference",description:"Entity Definition",source:"@site/versioned_docs/version-3.6/decorators.md",sourceDirName:".",slug:"/decorators",permalink:"/docs/3.6/decorators",editUrl:"https://github.com/mikro-orm/mikro-orm/edit/master/docs/versioned_docs/version-3.6/decorators.md",version:"3.6",lastUpdatedBy:"Renovate Bot",lastUpdatedAt:1621282848,formattedLastUpdatedAt:"5/17/2021",frontMatter:{title:"Decorators Reference"},sidebar:"version-3.6/docs",previous:{title:"Deployment",permalink:"/docs/3.6/deployment"},next:{title:"Smart Nested Populate",permalink:"/docs/3.6/nested-populate"}},d=[{value:"Entity Definition",id:"entity-definition",children:[{value:"@Entity()",id:"entity",children:[]}]},{value:"Entity Properties",id:"entity-properties",children:[{value:"@Property()",id:"property",children:[]},{value:"@PrimaryKey()",id:"primarykey",children:[]},{value:"@SerializedPrimaryKey()",id:"serializedprimarykey",children:[]},{value:"@Enum()",id:"enum",children:[]},{value:"@Index() and @Unique()",id:"index-and-unique",children:[]}]},{value:"Entity Relationships",id:"entity-relationships",children:[{value:"@ManyToOne()",id:"manytoone",children:[]},{value:"@OneToOne()",id:"onetoone",children:[]},{value:"@OneToMany()",id:"onetomany",children:[]},{value:"@ManyToMany()",id:"manytomany",children:[]}]},{value:"Lifecycle Hooks",id:"lifecycle-hooks",children:[{value:"@OnInit()",id:"oninit",children:[]},{value:"@BeforeCreate()",id:"beforecreate",children:[]},{value:"@AfterCreate()",id:"aftercreate",children:[]},{value:"@BeforeUpdate()",id:"beforeupdate",children:[]},{value:"@AfterUpdate()",id:"afterupdate",children:[]},{value:"@BeforeDelete()",id:"beforedelete",children:[]},{value:"@AfterDelete()",id:"afterdelete",children:[]}]},{value:"Entity Repository",id:"entity-repository",children:[{value:"@Repository()",id:"repository",children:[]}]}],p={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"entity-definition"},"Entity Definition"),(0,i.kt)("h3",{id:"entity"},"@Entity()"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"@Entity")," decorator is used to mark your model classes as entities. Do not use it for\nabstract base classes."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Optional"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"tableName")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Override default collection/table name.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"collection")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Alias for ",(0,i.kt)("inlineCode",{parentName:"td"},"tableName"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"customRepository")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"() => EntityRepository")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set custom repository class.")))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"You can also use ",(0,i.kt)("inlineCode",{parentName:"p"},"@Repository()")," decorator instead of ",(0,i.kt)("inlineCode",{parentName:"p"},"customRepository")," parameter.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@Entity({ tableName: 'authors' })\nexport class Author { ... }\n")),(0,i.kt)("h2",{id:"entity-properties"},"Entity Properties"),(0,i.kt)("h3",{id:"property"},"@Property()"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"@Property()")," decorator is used to define regular entity property. All following decorators\nextend the ",(0,i.kt)("inlineCode",{parentName:"p"},"@Property()")," decorator, so you can also use its parameters there. "),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Optional"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"fieldName")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Override default property name (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/naming-strategy"},"Naming Strategy"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"type")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"},"Type")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Explicitly specify the runtime type (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/metadata-providers"},"Metadata Providers")," and ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/custom-types"},"Custom Types"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"onUpdate")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"() => any")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Automatically update the property value every time entity gets updated.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"persist")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set to ",(0,i.kt)("inlineCode",{parentName:"td"},"false")," to define ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/serializing#shadow-properties"},"Shadow Property"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"hidden")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set to ",(0,i.kt)("inlineCode",{parentName:"td"},"true")," to omit the property when ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/serializing"},"Serializing"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"columnType")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Specify exact database column type for ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/schema-generator"},"Schema Generator"),". ",(0,i.kt)("strong",{parentName:"td"},"(SQL only)"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"length")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"number")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Length/precision of database column, used for ",(0,i.kt)("inlineCode",{parentName:"td"},"datetime/timestamp/varchar")," column types for ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/schema-generator"},"Schema Generator"),". ",(0,i.kt)("strong",{parentName:"td"},"(SQL only)"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"default")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"any")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Specify default column value for ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/schema-generator"},"Schema Generator"),". ",(0,i.kt)("strong",{parentName:"td"},"(SQL only)"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"unique")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set column as unique for ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/schema-generator"},"Schema Generator"),".. ",(0,i.kt)("strong",{parentName:"td"},"(SQL only)"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"nullable")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set column as nullable for ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/schema-generator"},"Schema Generator"),".. ",(0,i.kt)("strong",{parentName:"td"},"(SQL only)"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"unsigned")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set column as unsigned for ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/schema-generator"},"Schema Generator"),".. ",(0,i.kt)("strong",{parentName:"td"},"(SQL only)"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"version")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set to true to enable ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/transactions#optimistic-locking"},"Optimistic Locking"),". ",(0,i.kt)("strong",{parentName:"td"},"(SQL only)"))))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"You can use property initializers as usual.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@Property({ length: 50, fieldName: 'first_name' })\nname!: string;\n\n@Property({ columnType: 'datetime', fieldName: 'born_date' })\nborn?: Date;\n\n@Property({ columnType: 'tinyint' })\nage?: number;\n\n@Property({ onUpdate: () => new Date() })\nupdatedAt = new Date();\n\n@Property()\nregistered = false;\n")),(0,i.kt)("h3",{id:"primarykey"},"@PrimaryKey()"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"@PrimaryKey()")," decorator is used to define entity's unique primary key identifier. "),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"@PrimaryKey()")," decorator extend the ",(0,i.kt)("inlineCode",{parentName:"p"},"@Property()")," decorator, so you can use all\nits parameters.")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Every entity needs to have at least one primary key (see composite primary keys).")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Note that if only one PrimaryKey is set and it's type is number it will be set to auto incremented automatically in all SQL drivers. ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@PrimaryKey()\nid!: number; // auto increment PK in SQL drivers\n\n@PrimaryKey()\nuuid = uuid.v4(); // uuid PK in SQL drivers\n\n@PrimaryKey()\n_id!: ObjectId; // ObjectId PK in mongodb driver\n")),(0,i.kt)("h3",{id:"serializedprimarykey"},"@SerializedPrimaryKey()"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Property marked with ",(0,i.kt)("inlineCode",{parentName:"p"},"@SerializedPrimaryKey()")," is virtual, it will not be persisted\ninto the database.")),(0,i.kt)("p",null,"For MongoDB you can define serialized primary key, which will be then used in entity\nserialization via ",(0,i.kt)("inlineCode",{parentName:"p"},"JSON.stringify()")," (through method ",(0,i.kt)("inlineCode",{parentName:"p"},"entity.toJSON()"),").\nYou will be able to use it to manipulate with the primary key as string. "),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/3.6/usage-with-mongo"},"Usage with MongoDB")," and ",(0,i.kt)("a",{parentName:"p",href:"/docs/3.6/serializing"},"Serializing"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@PrimaryKey()\n_id: ObjectId;\n\n@SerializedPrimaryKey()\nid!: string;\n")),(0,i.kt)("h3",{id:"enum"},"@Enum()"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"@Enum()")," decorator extend the ",(0,i.kt)("inlineCode",{parentName:"p"},"@Property()")," decorator, so you can use all its\nparameters.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"@Enum()")," decorator can be used for both numeric and string enums. By default enums are\nconsidered numeric, and will be represented in the database schema as ",(0,i.kt)("inlineCode",{parentName:"p"},"tinyint/smallint"),".\nFor string enums, if you define the enum in same file, its values will be automatically\nsniffed. "),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/3.6/defining-entities#enums"},"Defining Entities"),"."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Optional"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"items")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"number[]")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"},"string[]")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"},"() => Dictionary")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Specify enum items explicitly.")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@Enum() // with ts-morph metadata provider we do not need to specify anything\nenum0 = MyEnum1.VALUE_1;\n\n@Enum(() => MyEnum1) // or @Enum({ items: () => MyEnum1 })\nenum1 = MyEnum1.VALUE_1;\n\n@Enum({ type: 'MyEnum2', nullable: true })\nenum2?: MyEnum2; // MyEnum2 needs to be defined in current file (can be re-exported)\n\n@Enum({ items: [1, 2, 3] })\nenum3 = 3;\n\n@Enum({ items: ['a', 'b', 'c'] })\nenum4 = 'a';\n")),(0,i.kt)("h3",{id:"index-and-unique"},"@Index() and @Unique()"),(0,i.kt)("p",null,"Use ",(0,i.kt)("inlineCode",{parentName:"p"},"@Index()")," to create an index, or ",(0,i.kt)("inlineCode",{parentName:"p"},"@Unique()")," to create unique constraint. You can\nuse those decorators both on the entity level and on property level. To create compound\nindex, use the decorator on the entity level and provide list of property names via the\n",(0,i.kt)("inlineCode",{parentName:"p"},"properties")," option."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/3.6/defining-entities#indexes"},"Defining Entities"),"."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Optional"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"name")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"index name")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"properties")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"},"string[]")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"list of properties, required when using on entity level")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"type")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"index type, not available for ",(0,i.kt)("inlineCode",{parentName:"td"},"@Unique()"))))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@Entity()\n@Index({ properties: ['name', 'age'] }) // compound index, with generated name\n@Index({ name: 'custom_idx_name', properties: ['name'] }) // simple index, with custom name\n@Unique({ properties: ['name', 'email'] })\nexport class Author {\n\n  @Property()\n  @Unique()\n  email!: string;\n\n  @Index() // generated name\n  @Property()\n  age?: number;\n\n  @Index({ name: 'born_index' })\n  @Property()\n  born?: Date;\n\n}\n")),(0,i.kt)("h2",{id:"entity-relationships"},"Entity Relationships"),(0,i.kt)("p",null,"All relationship decorators have ",(0,i.kt)("inlineCode",{parentName:"p"},"entity"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"cascade")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"eager")," optional parameters.\nIf you use the default ",(0,i.kt)("inlineCode",{parentName:"p"},"ReflectMetadataProvider"),", then ",(0,i.kt)("inlineCode",{parentName:"p"},"entity")," parameter might be required\nYou will be warned about it being not defined while required during discovery process if you\nuse ",(0,i.kt)("inlineCode",{parentName:"p"},"ReflectMetadataProvider"),". "),(0,i.kt)("p",null,"You can also use ",(0,i.kt)("inlineCode",{parentName:"p"},"type")," parameter instead of it - the difference being that ",(0,i.kt)("inlineCode",{parentName:"p"},"type")," parameter\nneeds to be string, while in ",(0,i.kt)("inlineCode",{parentName:"p"},"entity")," parameter you can provide a reference (wrapped in\na callback to overcome issues with circular dependencies) to the entity, which plays nice\nwith refactoring features in IDEs like WebStorm. "),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"If you explicitly provide ",(0,i.kt)("inlineCode",{parentName:"p"},"entity")," as a reference, it will enable type checks for other\nreference parameters like ",(0,i.kt)("inlineCode",{parentName:"p"},"inversedBy")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"mappedBy"),".")),(0,i.kt)("h3",{id:"manytoone"},"@ManyToOne()"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"@ManyToOne()")," decorator extend the ",(0,i.kt)("inlineCode",{parentName:"p"},"@Property()")," decorator, so you can use all\nits parameters.")),(0,i.kt)("p",null,"Many instances of the current Entity refer to One instance of the referred Entity."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/3.6/relationships#manytoone"},"Defining Entities")," for more examples."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Optional"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"entity")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"},"() => EntityName")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set target entity type.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"cascade")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"Cascade[]")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set what actions on owning entity should be cascaded to the relationship. Defaults to ",(0,i.kt)("inlineCode",{parentName:"td"},"[Cascade.PERSIST, Cascade.MERGE]")," (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/cascading"},"Cascading"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eager")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Always load the relationship.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"inversedBy")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"(string & keyof T) ")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"}," (e: T) => any")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Point to the inverse side property name.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"wrappedReference")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Wrap the entity in ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/entity-references"},(0,i.kt)("inlineCode",{parentName:"a"},"Reference")," wrapper"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"onDelete")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/cascading#declarative-referential-integrity"},"Referential integrity"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"onUpdateIntegrity")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/cascading#declarative-referential-integrity"},"Referential integrity"),".")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@ManyToOne()\nauthor1?: Author; // type taken via reflection (TsMorphMetadataProvider)\n\n@ManyToOne(() => Author) // explicit type\nauthor2?: Author;\n\n@ManyToOne({ entity: () => Author, cascade: [Cascade.ALL] }) // options object\nauthor3?: Author;\n")),(0,i.kt)("h3",{id:"onetoone"},"@OneToOne()"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"@OneToOne()")," decorator extend the ",(0,i.kt)("inlineCode",{parentName:"p"},"@Property()")," decorator, so you can use all\nits parameters.")),(0,i.kt)("p",null,"One instance of the current Entity refers to One instance of the referred Entity."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/3.6/relationships#onetoone"},"Defining Entities")," for more examples, including bi-directional 1:1."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Optional"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"entity")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"},"() => EntityName")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set target entity type.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"cascade")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"Cascade[]")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set what actions on owning entity should be cascaded to the relationship. Defaults to ",(0,i.kt)("inlineCode",{parentName:"td"},"[Cascade.PERSIST, Cascade.MERGE]")," (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/cascading"},"Cascading"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eager")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Always load the relationship.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"owner")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Explicitly set as owning side (same as providing ",(0,i.kt)("inlineCode",{parentName:"td"},"inversedBy"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"inversedBy")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"(string & keyof T) ")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"}," (e: T) => any")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Point to the inverse side property name.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"mappedBy")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"(string & keyof T)")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"},"(e: T) => any")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Point to the owning side property name.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"wrappedReference")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Wrap the entity in ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/entity-references"},(0,i.kt)("inlineCode",{parentName:"a"},"Reference")," wrapper"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"orphanRemoval")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Remove the entity when it gets disconnected from the relationship (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/cascading#orphan-removal"},"Cascading"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"joinColumn")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Override default database column name on the owning side (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/naming-strategy"},"Naming Strategy"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"onDelete")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/cascading#declarative-referential-integrity"},"Referential integrity"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"onUpdateIntegrity")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/cascading#declarative-referential-integrity"},"Referential integrity"),".")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"// when none of `owner/inverseBy/mappedBy` is provided, it will be considered owning side\n@OneToOne()\nbestFriend1!: User;\n\n// side with `inversedBy` is the owning one, to define inverse side use `mappedBy`\n@OneToOne({ inversedBy: 'bestFriend1', orphanRemoval: true })\nbestFriend2!: User;\n\n// when defining it like this, you need to specifically mark the owning side with `owner: true`\n@OneToOne(() => User, user => user.bestFriend2, { owner: true, orphanRemoval: true })\nbestFriend3!: User;\n")),(0,i.kt)("h3",{id:"onetomany"},"@OneToMany()"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"@OneToMany()")," decorator extend the ",(0,i.kt)("inlineCode",{parentName:"p"},"@Property()")," decorator, so you can use all\nits parameters.")),(0,i.kt)("p",null,"One instance of the current Entity has Many instances (references) to the referred Entity."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/3.6/relationships#onetomany"},"Defining Entities")," for more examples, including bi-directional 1:m."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"You need to initialize the value with ",(0,i.kt)("inlineCode",{parentName:"p"},"Collection<T>")," instance.")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Optional"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"mappedBy")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"(string & keyof T)")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"},"(e: T) => any")),(0,i.kt)("td",{parentName:"tr",align:null},"no"),(0,i.kt)("td",{parentName:"tr",align:null},"Point to the owning side property name.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"entity")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"},"() => EntityName")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set target entity type.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"cascade")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"Cascade[]")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set what actions on owning entity should be cascaded to the relationship. Defaults to ",(0,i.kt)("inlineCode",{parentName:"td"},"[Cascade.PERSIST, Cascade.MERGE]")," (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/cascading"},"Cascading"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eager")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Always load the relationship.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"orphanRemoval")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Remove the entity when it gets disconnected from the connection (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/cascading#orphan-removal"},"Cascading"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"orderBy")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"{ [field: string]: QueryOrder }")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set default ordering condition.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"joinColumn")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Override default database column name on the owning side (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/naming-strategy"},"Naming Strategy"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"inverseJoinColumn")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Override default database column name on the inverse side (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/naming-strategy"},"Naming Strategy"),").")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@OneToMany(() => Book, book => book.author)\nbooks1 = new Collection<Book>(this);\n\n@OneToMany({ mappedBy: 'author', cascade: [Cascade.ALL] })\nbooks2 = new Collection<Book>(this); // target entity type can be read via `TsMorphMetadataProvider` too\n")),(0,i.kt)("h3",{id:"manytomany"},"@ManyToMany()"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"@ManyToMany()")," decorator extend the ",(0,i.kt)("inlineCode",{parentName:"p"},"@Property()")," decorator, so you can use all\nits parameters.")),(0,i.kt)("p",null,"Many instances of the current Entity refers to Many instances of the referred Entity."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/3.6/relationships#manytomany"},"Defining Entities")," for more examples, including bi-directional m:n."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"You need to initialize the value with ",(0,i.kt)("inlineCode",{parentName:"p"},"Collection<T>")," instance.")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Optional"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"entity")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"},"() => EntityName")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set target entity type.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"cascade")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"Cascade[]")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set what actions on owning entity should be cascaded to the relationship. Defaults to ",(0,i.kt)("inlineCode",{parentName:"td"},"[Cascade.PERSIST, Cascade.MERGE]")," (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/cascading"},"Cascading"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"eager")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Always load the relationship.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"owner")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Explicitly set as owning side (same as providing ",(0,i.kt)("inlineCode",{parentName:"td"},"inversedBy"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"inversedBy")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"(string & keyof T) ")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"}," (e: T) => any")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Point to the inverse side property name.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"mappedBy")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"(string & keyof T)")," ","|"," ",(0,i.kt)("inlineCode",{parentName:"td"},"(e: T) => any")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Point to the owning side property name.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"orderBy")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"{ [field: string]: QueryOrder }")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Set default ordering condition.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"fixedOrder")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"boolean")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Force stable insertion order of items in the collection (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/collections#forcing-fixed-order-of-collection-items"},"Collections"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"fixedOrderColumn")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Override default order column name (",(0,i.kt)("inlineCode",{parentName:"td"},"id"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"pivotTable")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Override default name for pivot table (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/naming-strategy"},"Naming Strategy"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"joinColumn")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Override default database column name on the owning side (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/naming-strategy"},"Naming Strategy"),").")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"inverseJoinColumn")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},"yes"),(0,i.kt)("td",{parentName:"tr",align:null},"Override default database column name on the inverse side (see ",(0,i.kt)("a",{parentName:"td",href:"/docs/3.6/naming-strategy"},"Naming Strategy"),").")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@ManyToMany({ entity: () => BookTag, cascade: [], fixedOrderColumn: 'order' })\ntags = new Collection<BookTag>(this); // m:n with autoincrement PK\n\n@ManyToMany(() => BookTag, undefined, { pivotTable: 'book_to_tag_unordered', orderBy: { name: QueryOrder.ASC } })\ntagsUnordered = new Collection<BookTag>(this); // m:n with composite PK\n")),(0,i.kt)("h2",{id:"lifecycle-hooks"},"Lifecycle Hooks"),(0,i.kt)("p",null,"You can use lifecycle hooks to run some code when entity gets persisted. You can mark any of\nentity methods with them, you can also mark multiple methods with same hook."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"All hooks support async methods with one exception - ",(0,i.kt)("inlineCode",{parentName:"p"},"@OnInit"),".")),(0,i.kt)("h3",{id:"oninit"},"@OnInit()"),(0,i.kt)("p",null,"Fired when new instance of entity is created, either manually ",(0,i.kt)("inlineCode",{parentName:"p"},"em.create()"),", or\nautomatically when new entities are loaded from database"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"@OnInit")," is not fired when you create the entity manually via its constructor (",(0,i.kt)("inlineCode",{parentName:"p"},"new MyEntity()"),")")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@OnInit()\ndoStuffOnInit() {\n  this.fullName = `${this.firstName} - ${this.lastName}`; // initialize shadow property\n}\n")),(0,i.kt)("h3",{id:"beforecreate"},"@BeforeCreate()"),(0,i.kt)("p",null,"Fired right before we persist the new entity into the database."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@BeforeCreate()\nasync doStuffBeforeCreate() {\n  // ...\n}\n")),(0,i.kt)("h3",{id:"aftercreate"},"@AfterCreate()"),(0,i.kt)("p",null,"Fired right after the new entity is created in the database and merged to identity map.\nSince this event entity will have reference to ",(0,i.kt)("inlineCode",{parentName:"p"},"EntityManager")," and will be\nenabled to call ",(0,i.kt)("inlineCode",{parentName:"p"},"entity.init()")," method (including all entity references and collections)."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@AfterCreate()\nasync doStuffAfterCreate() {\n  // ...\n}\n")),(0,i.kt)("h3",{id:"beforeupdate"},"@BeforeUpdate()"),(0,i.kt)("p",null,"Fired right before we update the entity in the database."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@BeforeUpdate()\nasync doStuffBeforeUpdate() {\n  // ...\n}\n")),(0,i.kt)("h3",{id:"afterupdate"},"@AfterUpdate()"),(0,i.kt)("p",null,"Fired right after the entity is updated in the database. "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@AfterUpdate()\nasync doStuffAfterUpdate() {\n  // ...\n}\n")),(0,i.kt)("h3",{id:"beforedelete"},"@BeforeDelete()"),(0,i.kt)("p",null,"Fired right before we delete the record from database. It is fired only when\nremoving entity or entity reference, not when deleting records by query. "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@BeforeDelete()\nasync doStuffBeforeDelete() {\n  // ...\n}\n")),(0,i.kt)("h3",{id:"afterdelete"},"@AfterDelete()"),(0,i.kt)("p",null,"Fired right after the record gets deleted from database and it is unset from the identity map."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@AfterDelete()\nasync doStuffAfterDelete() {\n  // ...\n}\n")),(0,i.kt)("h2",{id:"entity-repository"},"Entity Repository"),(0,i.kt)("h3",{id:"repository"},"@Repository()"),(0,i.kt)("p",null,"Used to register custom entity repository. "),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"em.getRepository()")," will automatically return custom repository if it is registered.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"@Repository(Author)\nexport class CustomAuthorRepository extends EntityRepository<Author> {\n  // your custom methods...\n}\n")))}m.isMDXComponent=!0}}]);